@model ExpenseTracker.DAL.Models.ReportViewModel
@{
    ViewData["Title"] = "Expense Report";
}
<div class="container mt-4">
    <h2>Expense Report</h2>
    <form asp-action="Index" method="get" class="row g-2 align-items-end mb-4">
        <div class="col-auto">
            <label for="reportMonth" class="form-label">Month</label>
            <select id="reportMonth" name="month" class="form-select">
                @for (int m = 1; m <= 12; m++)
                {
                    <option value="@m" selected="@(m == Model.SelectedMonth)">
                        @System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(m)
                    </option>
                }
            </select>
        </div>
        <div class="col-auto">
            <label for="reportYear" class="form-label">Year</label>
            <select id="reportYear" name="year" class="form-select">
                @for (int y = Model.MinYear; y <= Model.MaxYear; y++)
                {
                    <option value="@y" selected="@(y == Model.SelectedYear)">
                        @y
                    </option>
                }
            </select>
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">Filter</button>
        </div>
        <div class="col-auto ms-auto">
            <button type="submit" name="format" value="pdf" class="btn btn-outline-secondary me-1">Download PDF</button>
            <button type="submit" name="format" value="excel" class="btn btn-outline-success">Download Excel</button>
        </div>
    </form>
    <table class="table table-dark table-striped">
        <thead>
            <tr>
               @* <th>User</th> *@
                <th>Period</th>
                <th>Total Expenses</th>
                <th>Category</th>
                <th>Note</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var exp in Model.Expenses)
            {
                <tr>
                   @*  <td>@exp.UserName</td> *@
                    <td>@Model.SelectedMonth/@Model.SelectedYear</td>
                    <td>@exp.Amount.ToString("C")</td>
                    <td>@exp.Category?.Title</td>
                    <td>@exp.Note</td>
                </tr>
            }
        </tbody>
    </table>
    @if (Model.Expenses.Count == 0)
    {
        <div class="alert alert-info mt-3">No expenses available for the selected period.</div>
    }
</div>